\RequirePackage{mathtools}
\DeclarePairedDelimiter\parentheses{\lparen}{\rparen}

%\let\trace\relax
%\let\tr\relax
%\let\Trace\relax
%\let\Tr\relax
\RenewDocumentCommand\trace{d()}{\operatorname{Tr}\IfValueT{#1}{\parentheses*{#1}}}
\RenewDocumentCommand\tr{d()}{\operatorname{Tr}\IfValueT{#1}{\parentheses*{#1}}}
\RenewDocumentCommand\Trace{d()}{\operatorname{Tr}\IfValueT{#1}{\parentheses*{#1}}}
\RenewDocumentCommand\Tr{d()}{\operatorname{Tr}\IfValueT{#1}{\parentheses*{#1}}}

\RenewDocumentCommand\arg{d()}{\operatorname{arg}\IfValueT{#1}{\parentheses*{#1}}}

\RenewDocumentCommand\sinh{od()}{\operatorname{sh}\IfNoValueTF{#1}{\parentheses*{#2}}{^{#1}\parentheses*{#2}}}
\RenewDocumentCommand\cosh{od()}{\operatorname{ch}\IfNoValueTF{#1}{\parentheses*{#2}}{^{#1}\parentheses*{#2}}}
\RenewDocumentCommand\tanh{od()}{\operatorname{th}\IfNoValueTF{#1}{\parentheses*{#2}}{^{#1}\parentheses*{#2}}}
\NewDocumentCommand\argsinh{d()}{\operatorname{argsh}\IfValueT{#1}{\parentheses*{#1}}}
\NewDocumentCommand\argcosh{d()}{\operatorname{argch}\IfValueT{#1}{\parentheses*{#1}}}
\NewDocumentCommand\argtanh{d()}{\operatorname{argth}\IfValueT{#1}{\parentheses*{#1}}}

\def\sh{\sinh}
\def\ch{\cosh}
\def\th{\tanh}
\def\argsh{\argsinh}
\def\argch{\argcosh}
\def\argth{\argtanh}

\def\eexp#1{\ensuremath{{\mathrm e}^{#1}}}

%\let\Re\relax
%\let\Im\relax
\RenewDocumentCommand\Re{d()}{\operatorname{\real}\IfValueT{#1}{\parentheses*{#1}}}
\RenewDocumentCommand\Im{d()}{\operatorname{\imaginary}\IfValueT{#1}{\parentheses*{#1}}}

\def\usenabla{%
%\let\grad\relax
%\let\div\relax
%\let\curl\relax
\RenewDocumentCommand\grad{d()}{\vec{\operatorname{\nabla}}\IfValueT{##1}{\parentheses*{##1}}}
\RenewDocumentCommand\div{d()}{\vec{\operatorname{\nabla}}\cdot\IfValueT{##1}{\parentheses*{##1}}}
\RenewDocumentCommand\curl{d()}{\vec{\operatorname{\nabla}}\wedge\IfValueT{##1}{\parentheses*{##1}}}
\def\rot{\curl}%
}
\def\nousenabla{%
%\let\grad\relax
%\let\div\relax
%\let\curl\relax
\RenewDocumentCommand\grad{d()}{\vec{\operatorname{\mathrm{grad}}}\IfValueT{##1}{\parentheses*{##1}}}
\RenewDocumentCommand\div{d()}{\operatorname{\mathrm{div}}\IfValueT{##1}{\parentheses*{##1}}}
\RenewDocumentCommand\curl{d()}{\vec{\operatorname{\mathrm{rot}}}\IfValueT{##1}{\parentheses*{##1}}}
\def\rot{\curl}%
}

\ifthenelse{\equal{\nablaOption}{true}}{\usenabla}{\nousenabla}

\RenewDocumentCommand\dim{d()}{\operatorname{dim}\IfValueT{#1}{\parentheses*{#1}}}
\NewDocumentCommand\sinc{d()}{\operatorname{sinc}\IfValueT{#1}{\parentheses*{#1}}}
\NewDocumentCommand\sign{d()}{\operatorname{sign}\IfValueT{#1}{\parentheses*{#1}}}
